{"ast":null,"code":"import React,{useState}from'react';import{useDropzone}from'react-dropzone';import axios from'axios';import{FiShare2,FiDownload}from'react-icons/fi';// Import icons for sharing and downloading\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[files,setFiles]=useState([]);const[progress,setProgress]=useState(0);const[statusMessage,setStatusMessage]=useState('');const[isSuccess,setIsSuccess]=useState(false);// To track success or error status\nconst[s3Url,setS3Url]=useState('');// Store the S3 URL of the uploaded file\nconst{getRootProps,getInputProps}=useDropzone({onDrop:acceptedFiles=>setFiles(acceptedFiles)});const handleUpload=async()=>{if(files.length===0){setStatusMessage('No files selected for upload.');setIsSuccess(false);return;}const formData=new FormData();formData.append('file',files[0]);try{// Reset progress and status\nsetProgress(0);setStatusMessage('Uploading...');setIsSuccess(false);setS3Url('');// Reset the S3 URL\nconst response=await axios.post('http://localhost:5001/upload',formData,{headers:{'Content-Type':'multipart/form-data'},onUploadProgress:progressEvent=>{const percentCompleted=Math.round(progressEvent.loaded*100/progressEvent.total);setProgress(percentCompleted);}});// On success, save the S3 URL and display it\nsetS3Url(response.data.s3Url);setStatusMessage(`File uploaded successfully!`);setIsSuccess(true);setProgress(100);}catch(error){console.error('Error uploading file:',error);setStatusMessage('Error uploading file to S3.');setIsSuccess(false);setProgress(0);}};// Function to copy the S3 URL to clipboard\nconst handleCopyToClipboard=()=>{navigator.clipboard.writeText(s3Url);alert('Link copied to clipboard!');};return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-10 rounded-lg shadow-lg text-center w-96\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold mb-5\",children:\"Upload Your File\"}),/*#__PURE__*/_jsxs(\"div\",{...getRootProps(),className:\"border-2 border-dashed border-gray-400 p-5 rounded-lg cursor-pointer mb-5\",children:[/*#__PURE__*/_jsx(\"input\",{...getInputProps()}),/*#__PURE__*/_jsx(\"p\",{children:\"Drag & drop files here, or click to select files\"})]}),files.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"mb-5\",children:files.map(file=>/*#__PURE__*/_jsx(\"li\",{children:file.name},file.name))}),progress>0&&/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-4 mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-4 rounded-full\",style:{width:`${progress}%`}})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"Upload\"}),statusMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto\",children:/*#__PURE__*/_jsx(\"p\",{className:`mt-4 ${isSuccess?'text-green-500':'text-red-500'}`,children:statusMessage})}),isSuccess&&s3Url&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-left\",children:[/*#__PURE__*/_jsx(\"a\",{href:s3Url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-500 underline\",children:\"Click here to view the uploaded file\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mt-2 space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleCopyToClipboard,className:\"flex items-center space-x-1 text-blue-500 hover:text-blue-600\",children:[/*#__PURE__*/_jsx(FiShare2,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Copy Link\"})]}),/*#__PURE__*/_jsxs(\"a\",{href:s3Url,target:\"_blank\",rel:\"noopener noreferrer\",download:true,className:\"flex items-center space-x-1 text-blue-500 hover:text-blue-600\",children:[/*#__PURE__*/_jsx(FiDownload,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Download\"})]})]})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useDropzone","axios","FiShare2","FiDownload","jsx","_jsx","jsxs","_jsxs","App","files","setFiles","progress","setProgress","statusMessage","setStatusMessage","isSuccess","setIsSuccess","s3Url","setS3Url","getRootProps","getInputProps","onDrop","acceptedFiles","handleUpload","length","formData","FormData","append","response","post","headers","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","data","error","console","handleCopyToClipboard","navigator","clipboard","writeText","alert","className","children","map","file","name","style","width","onClick","href","target","rel","download"],"sources":["/Users/developer/Sites/groveryfileupload/client/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport axios from 'axios';\nimport { FiShare2, FiDownload } from 'react-icons/fi'; // Import icons for sharing and downloading\n\nfunction App() {\n  const [files, setFiles] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [statusMessage, setStatusMessage] = useState('');\n  const [isSuccess, setIsSuccess] = useState(false); // To track success or error status\n  const [s3Url, setS3Url] = useState(''); // Store the S3 URL of the uploaded file\n\n  const { getRootProps, getInputProps } = useDropzone({\n    onDrop: (acceptedFiles) => setFiles(acceptedFiles),\n  });\n\n  const handleUpload = async () => {\n    if (files.length === 0) {\n      setStatusMessage('No files selected for upload.');\n      setIsSuccess(false);\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', files[0]);\n\n    try {\n      // Reset progress and status\n      setProgress(0);\n      setStatusMessage('Uploading...');\n      setIsSuccess(false);\n      setS3Url(''); // Reset the S3 URL\n\n      const response = await axios.post('http://localhost:5001/upload', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' },\n        onUploadProgress: (progressEvent) => {\n          const percentCompleted = Math.round(\n            (progressEvent.loaded * 100) / progressEvent.total\n          );\n          setProgress(percentCompleted);\n        },\n      });\n\n      // On success, save the S3 URL and display it\n      setS3Url(response.data.s3Url);\n      setStatusMessage(`File uploaded successfully!`);\n      setIsSuccess(true);\n      setProgress(100);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      setStatusMessage('Error uploading file to S3.');\n      setIsSuccess(false);\n      setProgress(0);\n    }\n  };\n\n  // Function to copy the S3 URL to clipboard\n  const handleCopyToClipboard = () => {\n    navigator.clipboard.writeText(s3Url);\n    alert('Link copied to clipboard!');\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\n      <div className=\"bg-white p-10 rounded-lg shadow-lg text-center w-96\">\n        <h1 className=\"text-xl font-bold mb-5\">Upload Your File</h1>\n\n        {/* Drag and Drop Area */}\n        <div\n          {...getRootProps()}\n          className=\"border-2 border-dashed border-gray-400 p-5 rounded-lg cursor-pointer mb-5\"\n        >\n          <input {...getInputProps()} />\n          <p>Drag & drop files here, or click to select files</p>\n        </div>\n\n        {/* Selected Files */}\n        {files.length > 0 && (\n          <ul className=\"mb-5\">\n            {files.map((file) => (\n              <li key={file.name}>{file.name}</li>\n            ))}\n          </ul>\n        )}\n\n        {/* Progress Bar */}\n        {progress > 0 && (\n          <div className=\"w-full bg-gray-200 rounded-full h-4 mb-5\">\n            <div\n              className=\"bg-blue-600 h-4 rounded-full\"\n              style={{ width: `${progress}%` }}\n            ></div>\n          </div>\n        )}\n\n        {/* Upload Button */}\n        <button\n          onClick={handleUpload}\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n        >\n          Upload\n        </button>\n\n        {/* Status Message */}\n        {statusMessage && (\n          <div className='overflow-auto'>\n          <p\n            className={`mt-4 ${\n              isSuccess ? 'text-green-500' : 'text-red-500'\n            }`}\n          >\n            {statusMessage}\n          </p>\n          </div>\n        )}\n\n        {/* Display S3 Link with Share and Download Icons */}\n        {isSuccess && s3Url && (\n          <div className=\"mt-4 text-left\">\n            <a\n              href={s3Url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-blue-500 underline\"\n            >\n              Click here to view the uploaded file\n            </a>\n            <div className=\"flex mt-2 space-x-2\">\n              {/* Copy to Clipboard (Share Icon) */}\n              <button\n                onClick={handleCopyToClipboard}\n                className=\"flex items-center space-x-1 text-blue-500 hover:text-blue-600\"\n              >\n                <FiShare2 className=\"w-5 h-5\" />\n                <span>Copy Link</span>\n              </button>\n\n              {/* Download Icon */}\n              <a\n                href={s3Url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                download\n                className=\"flex items-center space-x-1 text-blue-500 hover:text-blue-600\"\n              >\n                <FiDownload className=\"w-5 h-5\" />\n                <span>Download</span>\n              </a>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}